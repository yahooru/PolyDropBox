"use strict";(()=>{var e={};e.id=887,e.ids=[887],e.modules={11185:e=>{e.exports=require("mongoose")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},91920:(e,r,t)=>{t.r(r),t.d(r,{originalPathname:()=>g,patchFetch:()=>x,requestAsyncStorage:()=>c,routeModule:()=>d,serverHooks:()=>f,staticGenerationAsyncStorage:()=>m});var o={};t.r(o),t.d(o,{GET:()=>l,dynamic:()=>p});var n=t(49303),s=t(88716),a=t(60670),i=t(87070),u=t(9487);(0,u.u)();let p="force-dynamic";async function l(e){try{let{searchParams:r}=new URL(e.url),t=r.get("creator");if(!t)return i.NextResponse.json({error:"Creator address required"},{status:400});let o=await u.$.find({creator:t}).sort({createdAt:-1});return i.NextResponse.json({files:o})}catch(e){return console.error("Get files error:",e),i.NextResponse.json({error:"Failed to fetch files",message:e.message},{status:500})}}let d=new n.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/files/route",pathname:"/api/files",filename:"route",bundlePath:"app/api/files/route"},resolvedPagePath:"C:\\Users\\BMSIT\\PolyDropBox\\frontend\\app\\api\\files\\route.ts",nextConfigOutput:"",userland:o}),{requestAsyncStorage:c,staticGenerationAsyncStorage:m,serverHooks:f}=d,g="/api/files/route";function x(){return(0,a.patchFetch)({serverHooks:f,staticGenerationAsyncStorage:m})}},9487:(e,r,t)=>{t.d(r,{$:()=>u,u:()=>a});var o=t(11185),n=t.n(o);let s=process.env.MONGODB_URI||process.env.NEXT_PUBLIC_MONGODB_URI||"mongodb://localhost:27017/polydropbox";function a(){n().connections[0]?.readyState||n().connect(s)}let i=new(n()).Schema({fileId:{type:String,required:!0,unique:!0},fileName:String,fileSize:Number,ipfsHash:String,encryptedKey:String,creator:String,price:Number,expiryTime:Number,maxDownloads:Number,downloadCount:{type:Number,default:0},burnAfterDownload:Boolean,enableCrossChain:Boolean,createdAt:{type:Date,default:Date.now},previewHash:String,sharePasswordHash:String,linkExpiresAt:Number,mimeType:String,downloads:[{user:String,timestamp:Date,txHash:String}]}),u=n().models.File||n().model("File",i)}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),o=r.X(0,[948,972],()=>t(91920));module.exports=o})();