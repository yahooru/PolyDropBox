(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[676],{4445:function(e,r,s){Promise.resolve().then(s.bind(s,1056))},1056:function(e,r,s){"use strict";s.r(r),s.d(r,{default:function(){return x}});var a=s(7437),t=s(2265),l=s(3662),i=s(9376),n=s(5725),o=s(3464),c=s(6518),d=s(2611);function x(){let{address:e,isConnected:r}=(0,l.m)(),s=(0,i.useRouter)(),[x,p]=(0,t.useState)([]),[m,u]=(0,t.useState)(!1),[h,y]=(0,t.useState)({price:"0",expiryHours:"24",maxDownloads:"1",burnAfterDownload:!1,enableCrossChain:!0,sharePassword:"",linkExpiryHours:""}),g=e=>{p(r=>r.filter((r,s)=>s!==e))},{getRootProps:b,getInputProps:f,isDragActive:j}=(0,n.uI)({onDrop:e=>{p(r=>[...r,...e].slice(0,10))},maxFiles:10,maxSize:52428800}),v=async a=>{if(a.preventDefault(),x.length&&r&&e){u(!0);try{let r=new FormData;x.forEach(e=>r.append("file",e)),r.append("price",h.price),r.append("expiryHours",h.expiryHours),r.append("maxDownloads",h.maxDownloads),r.append("burnAfterDownload",String(h.burnAfterDownload)),r.append("enableCrossChain",String(h.enableCrossChain)),r.append("creator",e),h.sharePassword&&r.append("sharePassword",h.sharePassword),h.linkExpiryHours&&r.append("linkExpiryHours",h.linkExpiryHours);let a=await o.Z.post("/api/upload",r,{headers:{"Content-Type":"multipart/form-data"}});a.data.success&&(1===a.data.count?s.push("/file/".concat(a.data.fileId)):s.push("/dashboard"))}catch(e){console.error("Upload error:",e),alert("Upload failed. Please try again.")}finally{u(!1)}}};return r?(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-white to-primary-50/30",children:[(0,a.jsx)(d.w,{}),(0,a.jsxs)("div",{className:"max-w-3xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[(0,a.jsx)("h1",{className:"text-4xl font-bold text-gray-900 mb-2",children:"Upload File"}),(0,a.jsx)("p",{className:"text-gray-600 mb-8",children:"Upload single or multiple files. Organize and share securely."}),(0,a.jsxs)("form",{onSubmit:v,className:"bg-white rounded-2xl shadow-xl p-8 space-y-6 border border-gray-100",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select File(s) — up to 10 files"}),(0,a.jsxs)("div",{...b(),className:"border-2 border-dashed rounded-xl p-8 text-center cursor-pointer transition-all duration-200 ".concat(j?"border-primary-500 bg-primary-50/50 scale-[1.01]":"border-gray-300 hover:border-primary-400 hover:bg-gray-50/50"),children:[(0,a.jsx)("input",{...f()}),(0,a.jsx)("div",{className:"text-4xl mb-3",children:"\uD83D\uDCC1"}),x.length>0?(0,a.jsxs)("div",{className:"space-y-2",children:[x.map((e,r)=>(0,a.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,a.jsx)("span",{className:"text-primary-600 font-medium truncate max-w-xs",children:e.name}),(0,a.jsxs)("span",{className:"text-sm text-gray-500",children:["(",(e.size/1024).toFixed(1)," KB)"]}),(0,a.jsx)("button",{type:"button",onClick:e=>{e.stopPropagation(),g(r)},className:"text-red-500 hover:text-red-700 text-sm",children:"✕"})]},r)),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Click or drag to add more"})]}):(0,a.jsx)("p",{className:"text-gray-600",children:j?"Drop files here...":"Drag & drop files here, or click to select"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Price (USDC) ",(0,a.jsx)("span",{className:"text-xs text-gray-500",children:"Applies to each file"})]}),(0,a.jsx)("input",{type:"number",step:"0.01",min:"0",value:h.price,onChange:e=>y({...h,price:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"0.00"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Expiry Time"}),(0,a.jsxs)("select",{value:h.expiryHours,onChange:e=>y({...h,expiryHours:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500",children:[(0,a.jsx)("option",{value:"1",children:"1 hour"}),(0,a.jsx)("option",{value:"24",children:"24 hours"}),(0,a.jsx)("option",{value:"168",children:"7 days"}),(0,a.jsx)("option",{value:"720",children:"30 days"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Max Downloads"}),(0,a.jsx)("input",{type:"number",min:"1",value:h.maxDownloads,onChange:e=>y({...h,maxDownloads:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Link Expiry (optional) — when the share link stops working"}),(0,a.jsxs)("select",{value:h.linkExpiryHours,onChange:e=>y({...h,linkExpiryHours:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500",children:[(0,a.jsx)("option",{value:"",children:"No link expiry"}),(0,a.jsx)("option",{value:"24",children:"24 hours"}),(0,a.jsx)("option",{value:"168",children:"7 days"}),(0,a.jsx)("option",{value:"720",children:"30 days"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password Protection (optional)"}),(0,a.jsx)("input",{type:"password",value:h.sharePassword,onChange:e=>y({...h,sharePassword:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500",placeholder:"Leave empty for no password"}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Recipients must enter this password to view the file page"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-6",children:[(0,a.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,a.jsx)("input",{type:"checkbox",checked:h.burnAfterDownload,onChange:e=>y({...h,burnAfterDownload:e.target.checked}),className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"}),(0,a.jsx)("span",{className:"text-sm text-gray-700",children:"Burn after download"})]}),(0,a.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,a.jsx)("input",{type:"checkbox",checked:h.enableCrossChain,onChange:e=>y({...h,enableCrossChain:e.target.checked}),className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"}),(0,a.jsx)("span",{className:"text-sm text-gray-700",children:"Enable cross-chain (SideShift)"})]})]}),(0,a.jsx)("button",{type:"submit",disabled:!x.length||m,className:"w-full px-6 py-3 bg-primary-500 text-white rounded-xl hover:bg-primary-600 transition disabled:opacity-50 disabled:cursor-not-allowed font-semibold shadow-lg hover:shadow-xl",children:m?"Uploading...":x.length>1?"Upload ".concat(x.length," Files"):"Upload & Create Share Link"})]})]})]}):(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-white to-primary-50/30 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Connect Wallet"}),(0,a.jsx)("p",{className:"text-gray-600 mb-4",children:"Please connect your wallet to upload files"}),(0,a.jsx)(c.T,{})]})})}},2611:function(e,r,s){"use strict";s.d(r,{w:function(){return o}});var a=s(7437),t=s(2265),l=s(7648),i=s(3662),n=s(6518);function o(){let{address:e,isConnected:r}=(0,i.m)(),[s,o]=(0,t.useState)(!1);return((0,t.useEffect)(()=>{o(!0)},[]),s)?(0,a.jsx)("nav",{className:"bg-white/80 backdrop-blur-sm border-b border-primary-200 sticky top-0 z-50",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,a.jsxs)(l.default,{href:"/",className:"flex items-center space-x-3 hover:opacity-80 transition",children:[(0,a.jsx)("div",{className:"h-10 w-10 rounded-lg bg-gradient-to-br from-primary-400 to-primary-600 flex items-center justify-center text-white text-2xl",children:"\uD83D\uDCE6"}),(0,a.jsx)("h1",{className:"text-2xl font-bold text-primary-600",children:"PolyDropBox"})]}),(0,a.jsx)("div",{className:"flex items-center space-x-4",children:r?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l.default,{href:"/upload",className:"px-4 py-2 bg-primary-500 text-white rounded-lg hover:bg-primary-600 transition",children:"Upload"}),(0,a.jsx)(l.default,{href:"/dashboard",className:"px-4 py-2 text-primary-600 hover:text-primary-700",children:"Dashboard"}),(0,a.jsxs)("div",{className:"px-4 py-2 bg-primary-100 text-primary-700 rounded-lg text-sm",children:[null==e?void 0:e.slice(0,6),"...",null==e?void 0:e.slice(-4)]})]}):(0,a.jsx)(n.T,{})})]})})}):(0,a.jsx)("nav",{className:"bg-white/80 backdrop-blur-sm border-b border-primary-200 sticky top-0 z-50",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,a.jsxs)(l.default,{href:"/",className:"flex items-center space-x-3 hover:opacity-80 transition",children:[(0,a.jsx)("div",{className:"h-10 w-10 rounded-lg bg-gradient-to-br from-primary-400 to-primary-600 flex items-center justify-center text-white text-2xl",children:"\uD83D\uDCE6"}),(0,a.jsx)("h1",{className:"text-2xl font-bold text-primary-600",children:"PolyDropBox"})]}),(0,a.jsx)("div",{className:"flex items-center space-x-4",children:(0,a.jsx)(n.T,{})})]})})})}},6518:function(e,r,s){"use strict";s.d(r,{T:function(){return c}});var a=s(7437),t=s(2265),l=s(3662),i=s(542),n=s(9778),o=s(9726);function c(){let{address:e,isConnected:r}=(0,l.m)(),{connect:s}=(0,i.$)(),{disconnect:c}=(0,n.q)(),[d,x]=(0,t.useState)(!1);return((0,t.useEffect)(()=>{x(!0)},[]),d)?r&&e?(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)("div",{className:"px-4 py-2 bg-primary-100 text-primary-700 rounded-lg text-sm",children:[e.slice(0,6),"...",e.slice(-4)]}),(0,a.jsx)("button",{onClick:()=>c(),className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition text-sm",children:"Disconnect"})]}):(0,a.jsx)("button",{onClick:()=>s({connector:(0,o.L)()}),className:"px-4 py-2 bg-primary-500 text-white rounded-lg hover:bg-primary-600 transition",children:"Connect Wallet"}):(0,a.jsx)("button",{className:"px-4 py-2 bg-primary-500 text-white rounded-lg hover:bg-primary-600 transition",disabled:!0,children:"Connect Wallet"})}}},function(e){e.O(0,[432,3,464,167,971,117,744],function(){return e(e.s=4445)}),_N_E=e.O()}]);