(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{9039:function(e,t,s){Promise.resolve().then(s.bind(s,1720))},1720:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return o}});var r=s(7437),a=s(2265),l=s(3662),i=s(7648),n=s(3464),d=s(6518),c=s(2611);function o(){let{address:e,isConnected:t}=(0,l.m)(),[s,o]=(0,a.useState)([]),[x,m]=(0,a.useState)(!0),[h,p]=(0,a.useState)({totalFiles:0,totalDownloads:0,totalRevenue:0}),[u,y]=(0,a.useState)(null),g=a.useCallback(async()=>{try{let t=(await n.Z.get("/api/files?creator=".concat(e))).data.files||[];o(t);let s=t.reduce((e,t)=>e+(t.downloadCount||0),0),r=t.reduce((e,t)=>{let s=(t.price||0)*(t.downloadCount||0);return e+s},0);p({totalFiles:t.length,totalDownloads:s,totalRevenue:r})}catch(e){console.error("Error fetching files:",e)}finally{m(!1)}},[e]);return((0,a.useEffect)(()=>{e&&g()},[e,g]),t)?(0,r.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-white to-primary-50/30",children:[(0,r.jsx)(c.w,{}),(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-4xl font-bold text-gray-900",children:"Creator Dashboard"}),(0,r.jsx)("p",{className:"text-gray-600 mt-1",children:"Track your files, downloads, and revenue"})]}),(0,r.jsx)(i.default,{href:"/upload",className:"px-6 py-3 bg-primary-500 text-white rounded-xl hover:bg-primary-600 transition font-semibold shadow-lg",children:"Upload New File"})]}),(0,r.jsxs)("div",{className:"grid md:grid-cols-3 gap-6 mb-8",children:[(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6 border border-primary-100 hover:shadow-xl transition",children:[(0,r.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Total Files"}),(0,r.jsx)("p",{className:"text-3xl font-bold text-primary-600",children:h.totalFiles})]}),(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6 border border-primary-100 hover:shadow-xl transition",children:[(0,r.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Total Downloads"}),(0,r.jsx)("p",{className:"text-3xl font-bold text-primary-600",children:h.totalDownloads})]}),(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6 border border-primary-100 hover:shadow-xl transition",children:[(0,r.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Total Revenue"}),(0,r.jsxs)("p",{className:"text-3xl font-bold text-primary-600",children:[h.totalRevenue.toFixed(2)," USDC"]})]})]}),x?(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-500 mx-auto"}),(0,r.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading files..."})]}):0===s.length?(0,r.jsxs)("div",{className:"text-center py-12 bg-white rounded-2xl shadow-lg border border-gray-100",children:[(0,r.jsx)("div",{className:"text-5xl mb-4",children:"\uD83D\uDCC1"}),(0,r.jsx)("p",{className:"text-gray-600 mb-4",children:"No files uploaded yet"}),(0,r.jsx)(i.default,{href:"/upload",className:"px-6 py-3 bg-primary-500 text-white rounded-xl hover:bg-primary-600 transition inline-block font-semibold",children:"Upload Your First File"})]}):(0,r.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl overflow-hidden border border-gray-100",children:[(0,r.jsxs)("div",{className:"px-6 py-4 bg-gray-50 border-b",children:[(0,r.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Your Files"}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Click a row to view download audit logs"})]}),(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"w-full",children:[(0,r.jsx)("thead",{className:"bg-primary-50",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase",children:"File Name"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase",children:"Price"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase",children:"Downloads"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase",children:"Status"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase",children:"Actions"})]})}),(0,r.jsx)("tbody",{className:"divide-y divide-gray-200",children:s.map(e=>{let t=Date.now()/1e3>(e.expiryTime||0),s=u===e.fileId,l=e.downloads||[];return(0,r.jsxs)(a.Fragment,{children:[(0,r.jsxs)("tr",{className:"hover:bg-gray-50 cursor-pointer transition",onClick:()=>y(s?null:e.fileId),children:[(0,r.jsxs)("td",{className:"px-6 py-4",children:[(0,r.jsx)("p",{className:"font-medium text-gray-900",children:e.fileName||e.fileId}),(0,r.jsxs)("p",{className:"text-xs text-gray-500 font-mono",children:[e.fileId.slice(0,16),"..."]})]}),(0,r.jsx)("td",{className:"px-6 py-4",children:(0,r.jsx)("span",{className:"text-gray-900 font-semibold",children:0===e.price?"Free":"".concat(e.price," USDC")})}),(0,r.jsx)("td",{className:"px-6 py-4",children:(0,r.jsxs)("span",{className:"text-gray-900",children:[e.downloadCount||0," / ",e.maxDownloads||0]})}),(0,r.jsx)("td",{className:"px-6 py-4",children:(0,r.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-semibold ".concat(t?"bg-red-100 text-red-800":e.isActive?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:t?"Expired":e.isActive?"Active":"Inactive"})}),(0,r.jsx)("td",{className:"px-6 py-4",children:(0,r.jsx)(i.default,{href:"/file/".concat(e.fileId),onClick:e=>e.stopPropagation(),className:"text-primary-600 hover:text-primary-700 font-semibold text-sm",children:"View â†’"})})]},e.fileId),s&&l.length>0&&(0,r.jsx)("tr",{className:"bg-gray-50/50",children:(0,r.jsx)("td",{colSpan:5,className:"px-6 py-4",children:(0,r.jsxs)("div",{className:"rounded-xl bg-white border border-gray-200 p-4",children:[(0,r.jsx)("h3",{className:"text-sm font-semibold text-gray-700 mb-3 flex items-center gap-2",children:"\uD83D\uDCCB Download Audit Logs"}),(0,r.jsx)("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:l.map((e,t)=>{var s,a;return(0,r.jsxs)("div",{className:"flex items-center justify-between text-sm py-2 px-3 bg-gray-50 rounded-lg",children:[(0,r.jsxs)("span",{className:"font-mono text-gray-600",children:[null===(s=e.user)||void 0===s?void 0:s.slice(0,10),"...",null===(a=e.user)||void 0===a?void 0:a.slice(-8)]}),(0,r.jsx)("span",{className:"text-gray-500",children:e.timestamp?new Date(e.timestamp).toLocaleString():"N/A"}),e.txHash&&(0,r.jsx)("a",{href:"https://amoy.polygonscan.com/tx/".concat(e.txHash),target:"_blank",rel:"noopener noreferrer",className:"text-primary-600 hover:underline text-xs",children:"View TX"})]},t)})})]})})},"".concat(e.fileId,"-logs"))]},e.fileId)})})]})})]})]})]}):(0,r.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-white to-primary-50/30 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Connect Wallet"}),(0,r.jsx)("p",{className:"text-gray-600 mb-4",children:"Please connect your wallet to view your dashboard"}),(0,r.jsx)(d.T,{})]})})}},2611:function(e,t,s){"use strict";s.d(t,{w:function(){return d}});var r=s(7437),a=s(2265),l=s(7648),i=s(3662),n=s(6518);function d(){let{address:e,isConnected:t}=(0,i.m)(),[s,d]=(0,a.useState)(!1);return((0,a.useEffect)(()=>{d(!0)},[]),s)?(0,r.jsx)("nav",{className:"bg-white/80 backdrop-blur-sm border-b border-primary-200 sticky top-0 z-50",children:(0,r.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,r.jsxs)(l.default,{href:"/",className:"flex items-center space-x-3 hover:opacity-80 transition",children:[(0,r.jsx)("div",{className:"h-10 w-10 rounded-lg bg-gradient-to-br from-primary-400 to-primary-600 flex items-center justify-center text-white text-2xl",children:"\uD83D\uDCE6"}),(0,r.jsx)("h1",{className:"text-2xl font-bold text-primary-600",children:"PolyDropBox"})]}),(0,r.jsx)("div",{className:"flex items-center space-x-4",children:t?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l.default,{href:"/upload",className:"px-4 py-2 bg-primary-500 text-white rounded-lg hover:bg-primary-600 transition",children:"Upload"}),(0,r.jsx)(l.default,{href:"/dashboard",className:"px-4 py-2 text-primary-600 hover:text-primary-700",children:"Dashboard"}),(0,r.jsxs)("div",{className:"px-4 py-2 bg-primary-100 text-primary-700 rounded-lg text-sm",children:[null==e?void 0:e.slice(0,6),"...",null==e?void 0:e.slice(-4)]})]}):(0,r.jsx)(n.T,{})})]})})}):(0,r.jsx)("nav",{className:"bg-white/80 backdrop-blur-sm border-b border-primary-200 sticky top-0 z-50",children:(0,r.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,r.jsxs)(l.default,{href:"/",className:"flex items-center space-x-3 hover:opacity-80 transition",children:[(0,r.jsx)("div",{className:"h-10 w-10 rounded-lg bg-gradient-to-br from-primary-400 to-primary-600 flex items-center justify-center text-white text-2xl",children:"\uD83D\uDCE6"}),(0,r.jsx)("h1",{className:"text-2xl font-bold text-primary-600",children:"PolyDropBox"})]}),(0,r.jsx)("div",{className:"flex items-center space-x-4",children:(0,r.jsx)(n.T,{})})]})})})}},6518:function(e,t,s){"use strict";s.d(t,{T:function(){return c}});var r=s(7437),a=s(2265),l=s(3662),i=s(542),n=s(9778),d=s(9726);function c(){let{address:e,isConnected:t}=(0,l.m)(),{connect:s}=(0,i.$)(),{disconnect:c}=(0,n.q)(),[o,x]=(0,a.useState)(!1);return((0,a.useEffect)(()=>{x(!0)},[]),o)?t&&e?(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsxs)("div",{className:"px-4 py-2 bg-primary-100 text-primary-700 rounded-lg text-sm",children:[e.slice(0,6),"...",e.slice(-4)]}),(0,r.jsx)("button",{onClick:()=>c(),className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition text-sm",children:"Disconnect"})]}):(0,r.jsx)("button",{onClick:()=>s({connector:(0,d.L)()}),className:"px-4 py-2 bg-primary-500 text-white rounded-lg hover:bg-primary-600 transition",children:"Connect Wallet"}):(0,r.jsx)("button",{className:"px-4 py-2 bg-primary-500 text-white rounded-lg hover:bg-primary-600 transition",disabled:!0,children:"Connect Wallet"})}}},function(e){e.O(0,[432,3,464,971,117,744],function(){return e(e.s=9039)}),_N_E=e.O()}]);